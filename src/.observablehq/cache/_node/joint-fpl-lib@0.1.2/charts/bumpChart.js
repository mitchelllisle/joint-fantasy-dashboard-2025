import*as o from"npm:@observablehq/plot";import*as d from"npm:d3";const f={domain:["Thrillhouse","youngsandwich","Not the Wirtz Team","Endo Days"],range:["#00ff85","#e90052","#963cff","#04f5ff"]};function k(t,{x:s="gameweek",y:a="rank",z:e="team",width:i}={}){const r=o.stackY2({x:s,z:e,order:a}),[u,l]=d.extent(o.valueof(t,s));return o.plot({title:"Rank Across Gameweeks",subtitle:"Shows the rankings as they change throughout the season",width:i,marginLeft:100,marginRight:100,x:{[i<480?"insetRight":"inset"]:30,label:null,grid:!0},y:{axis:null,inset:20,reverse:!0},color:f,marks:[o.lineY(t,{...r,stroke:e,strokeWidth:26,curve:"bump-x",sort:{color:"y",reduce:"first"},render:x({stroke:"var(--theme-background-alt)",strokeWidth:33})}),o.text(t,{...r,text:r.y,fill:"black",stroke:e,tip:!0}),i<480?null:o.text(t,{...r,filter:n=>n[s]<=u,text:e,dx:-20,textAnchor:"end"}),o.text(t,{...r,filter:n=>n[s]>=l,text:e,dx:20,textAnchor:"start"})]})}function x({stroke:t="currentColor",strokeWidth:s=3}={}){return(a,e,i,r,u,l)=>{const n=l(a,e,i,r,u);for(const h of[...n.childNodes]){const c=h.cloneNode(!0);c.setAttribute("stroke",t),c.setAttribute("stroke-width",s),h.parentNode.insertBefore(c,h)}return n}}export{k as bumpChart};
