import*as a from"npm:@observablehq/plot";import*as o from"npm:d3";const f={domain:["Thrillhouse","youngsandwich","Not the Wirtz Team","Endo Days"],range:["#00ff85","#e90052","#963cff","#04f5ff"]};function d(i,{width:r}={}){const t={};i.forEach(e=>{t[e.team]||(t[e.team]={team:e.team,points:[],best:-1/0,worst:1/0}),t[e.team].points.push(e.points),t[e.team].best=Math.max(t[e.team].best,e.points),t[e.team].worst=Math.min(t[e.team].worst,e.points)});const s=Object.values(t).map(e=>{const n=o.mean(e.points),m=o.deviation(e.points);return{team:e.team,mean:n,stdDev:m,best:e.best,worst:e.worst,consistencyScore:100-m/n*100}}),l=o.max(s,e=>e.best),c=o.min(s,e=>e.worst)-5;return a.plot({title:"Consistency & Performance Range",subtitle:"Best/worst gameweek with average shown. Shorter bars = more consistent",width:r,marginLeft:120,x:{label:"Points",domain:[c,l]},y:{label:null},color:{...f,legend:!1},marks:[a.barX(s,{x1:"worst",x2:"best",y:"team",fill:"team",fillOpacity:.2}),a.tickX(s,{x:"mean",y:"team",stroke:"team",strokeWidth:4}),a.dot(s,{x:"best",y:"team",fill:"team",r:5}),a.dot(s,{x:"worst",y:"team",fill:"team",r:5}),a.tip(s,a.pointer({x:"mean",y:"team",title:e=>`${e.team}
Best: ${e.best}
Avg: ${e.mean.toFixed(1)}
Worst: ${e.worst}
Std Dev: ${e.stdDev.toFixed(1)}`}))]})}export{d as consistencyBullet};
