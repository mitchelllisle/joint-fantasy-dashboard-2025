import*as a from"npm:@observablehq/plot";const s={domain:["Thrillhouse","youngsandwich","Not the Wirtz Team","Endo Days"],range:["#00ff85","#e90052","#963cff","#04f5ff"]};function h(o){if(o.length===0||o.length===1)return 0;const i=[...o].sort((n,l)=>n-l),e=i.length,t=i.reduce((n,l)=>n+l,0);if(t===0)return 0;let r=0;for(let n=0;n<e;n++)r+=(n+1)*i[n];return 2*r/(e*t)-(e+1)/e}function c(o,i,e="No data available"){return o.length===0?[i.text([e],{frameAnchor:"middle",fontSize:16,fill:"#999"})]:[]}function f(o,{width:i}){console.log("Gini chart - input data length:",o.length);const e=o.filter(n=>n.owner!==null);console.log("Gini chart - owned data length:",e.length);const t={};e.forEach(n=>{t[n.owner]||(t[n.owner]={owner:n.owner,points:[],maxPoints:0}),t[n.owner].points.push(n.total_points),t[n.owner].maxPoints=Math.max(t[n.owner].maxPoints,n.total_points)});const r=Object.values(t).map(n=>({owner:n.owner,gini:h(n.points)*100,maxPoints:n.maxPoints}));return console.log("Gini chart - giniData:",r),a.plot({title:"Gini Index by Owner",subtitle:"A measure of inequality in points scored. 0% = perfectly equal, 100 = one player has all the points. The lower the score, the more players are contributing the points. Size of hexagon represents max points scored by a single player.",width:i,height:500,color:{...s,legend:!1},y:{domain:[0,100],label:"Gini Index"},x:{label:null},r:{range:[5,20]},marginTop:40,marginLeft:80,marks:[a.hexagon(r,a.dodgeX({y:"gini",r:"maxPoints",fill:"owner",tip:!0,fillOpacity:.8,strokeWidth:10})),...c(r,a)]})}export{f as giniIndexChart};
