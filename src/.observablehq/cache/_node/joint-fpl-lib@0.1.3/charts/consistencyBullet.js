const d={domain:["Thrillhouse","youngsandwich","Not the Wirtz Team","Endo Days"],range:["#00ff85","#e90052","#963cff","#04f5ff"]};function f(n,{Plot:s,d3:a,width:r}={}){const t={};n.forEach(e=>{t[e.team]||(t[e.team]={team:e.team,points:[],best:-1/0,worst:1/0}),t[e.team].points.push(e.points),t[e.team].best=Math.max(t[e.team].best,e.points),t[e.team].worst=Math.min(t[e.team].worst,e.points)});const o=Object.values(t).map(e=>{const i=a.mean(e.points),m=a.deviation(e.points);return{team:e.team,mean:i,stdDev:m,best:e.best,worst:e.worst,consistencyScore:100-m/i*100}}),l=a.max(o,e=>e.best),c=a.min(o,e=>e.worst)-5;return s.plot({title:"Consistency & Performance Range",subtitle:"Best/worst gameweek with average shown. Shorter bars = more consistent",width:r,marginLeft:120,x:{label:"Points",domain:[c,l]},y:{label:null},color:{...d,legend:!1},marks:[s.barX(o,{x1:"worst",x2:"best",y:"team",fill:"team",fillOpacity:.2}),s.tickX(o,{x:"mean",y:"team",stroke:"team",strokeWidth:4}),s.dot(o,{x:"best",y:"team",fill:"team",r:5}),s.dot(o,{x:"worst",y:"team",fill:"team",r:5}),s.tip(o,s.pointer({x:"mean",y:"team",title:e=>`${e.team}
Best: ${e.best}
Avg: ${e.mean.toFixed(1)}
Worst: ${e.worst}
Std Dev: ${e.stdDev.toFixed(1)}`}))]})}export{f as consistencyBullet};
