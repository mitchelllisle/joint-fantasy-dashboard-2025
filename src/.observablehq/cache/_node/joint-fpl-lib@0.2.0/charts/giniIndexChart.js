const s={domain:["Thrillhouse","youngsandwich","Not the Wirtz Team","Endo Days"],range:["#00ff85","#e90052","#963cff","#04f5ff"]};function h(o){if(o.length===0||o.length===1)return 0;const t=[...o].sort((e,a)=>e-a),i=t.length,l=t.reduce((e,a)=>e+a,0);if(l===0)return 0;let r=0;for(let e=0;e<i;e++)r+=(e+1)*t[e];return 2*r/(i*l)-(i+1)/i}function c(o,t,i="No data available"){return o.length===0?[t.text([i],{frameAnchor:"middle",fontSize:16,fill:"#999"})]:[]}function g(o,{Plot:t,d3:i,width:l}={}){console.log("Gini chart - input data length:",o.length);const r=o.filter(n=>n.owner!==null);console.log("Gini chart - owned data length:",r.length);const e={};r.forEach(n=>{e[n.owner]||(e[n.owner]={owner:n.owner,points:[],maxPoints:0}),e[n.owner].points.push(n.total_points),e[n.owner].maxPoints=Math.max(e[n.owner].maxPoints,n.total_points)});const a=Object.values(e).map(n=>({owner:n.owner,gini:h(n.points)*100,maxPoints:n.maxPoints}));return console.log("Gini chart - giniData:",a),t.plot({title:"Gini Index by Owner",subtitle:"A measure of inequality in points scored. 0% = perfectly equal, 100 = one player has all the points. The lower the score, the more players are contributing the points. Size of hexagon represents max points scored by a single player.",width:l,height:500,color:{...s,legend:!1},y:{domain:[0,100],label:"Gini Index"},x:{label:null},r:{range:[5,20]},marginTop:40,marginLeft:80,marks:[t.hexagon(a,t.dodgeX({y:"gini",r:"maxPoints",fill:"owner",tip:!0,fillOpacity:.8,strokeWidth:10})),...c(a,t)]})}export{g as giniIndexChart};
